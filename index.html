<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitCoach Pro - Client Portal</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="FitCoach Pro">
    <meta name="description" content="Your 12-Week Transformation Journey - Track progress, access training videos, and connect with your coach.">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkZpdENvYWNoIFBybyIsCiAgInNob3J0X25hbWUiOiAiRml0Q29hY2giLAogICJkZXNjcmlwdGlvbiI6ICJZb3VyIDEyLVdlZWsgVHJhbnNmb3JtYXRpb24gSm91cm5leSIsCiAgInN0YXJ0X3VybCI6ICIuLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzY2N2VlYSIsCiAgInRoZW1lX2NvbG9yIjogIiM2NjdlZWEiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXhNakFpSUdobGFXZG9kRDBpTVRJd0lpQjJhV1YzUW05NFBTSXdJREFnTVRJd0lERXlNQ0krUEhKbFkzUWdkMmxrZEdnOUlqRXlNQ0lnYUdWcFoyaDBQU0l4TWpBaUlHWnBiR3c5SWlNMk5qZGxaV0VpTHo0OGNHRjBhQ0JrUFNKdE5qQWdOakJzTVRVZ01UVmpMVGd1TXpZZ01UTXRNVFV0TVRWMExURXpJREV6YzBrdGNEVnNMVGczWXkwNExqTTJMVEV6TFRFMUxURXplaUlnWm1sc2JEMGlJelkyTnpsbVlpSXZQand2YzNablBnPT0iLAogICAgICAic2l6ZXMiOiAiMTIweDEyMCIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiLAogICAgICAicHVycG9zZSI6ICJhbnkgbWFza2FibGUiCiAgICB9LAogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJMU1USXBJR2hsYVdkb2REMGlOVEV5SWlCMmFXVjNRbTk0UFNJd0lEQWdOVEV5SURRNE1DSTRQSEpsWTNRZ2QybGtkR2c5SWpVeE1pSWdhR1ZwWjJoMFBTSTBPREFpSUdacGJHdzlJaU0yTmpkbFpXRWlMejQ4Y0dGMGFDQmtQU0p0TWpRd0lESkVOak5zTmpjZ05qZGpMVFEwTGprZ05qTXROamNnTmpjelF5MHlNaUF6TmprZ01pQTBNakJzTFRFeE5XTXROREF1TnlBMk5DMDJOeUEyTjFNeE9TMDBORGtnTmkwdE9EY2dNakl0TkROZ01qUXRNVFV3WXpRd0xqY3ROalFnTmpjdE5qZDZlaUlnWm1sc2JEMGlJelkyTnpsbVlpSXZQand2YzNablBnPT0iLAogICAgICAic2l6ZXMiOiAiNTEyeDQ4MCIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiLAogICAgICAicHVycG9zZSI6ICJhbnkgbWFza2FibGUiCiAgICB9CiAgXQp9">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+PHJlY3Qgd2lkdGg9IjEyMCIgaGVpZ2h0PSIxMjAiIGZpbGw9IiM2NjdlZWEiLz48cGF0aCBkPSJtNjAgNjBsMTUgMTVjLTguMzYgMTMtMTUtMTV0LTEzIDEzczktcDVsLTg3Yy04LjM2LTEzLTE1LTEzeiIgZmlsbD0iIzY2NzlmYiIvPjwvc3ZnPg==">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
            transition: all 0.2s ease;
            -webkit-tap-highlight-color: transparent;
        }
        
        .btn:hover, .btn:active {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn-success { background: #28a745; }
        .btn-secondary { background: #6c757d; }
        
        .hidden { display: none; }
        
        .demo-buttons {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            transition: width 0.5s ease;
        }
        
        .tabs {
            display: flex;
            border-bottom: 2px solid #e1e5e9;
            margin-bottom: 20px;
            flex-wrap: wrap;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
            white-space: nowrap;
            -webkit-tap-highlight-color: transparent;
        }
        
        .tab.active {
            border-bottom-color: #667eea;
            color: #667eea;
        }
        
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .video-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .video-icon {
            width: 100%;
            height: 150px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .tracking-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .tracking-card {
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #f8f9fa;
            font-weight: bold;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            margin: 5px 0;
            font-family: inherit;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .client-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-active { background: #d4edda; color: #155724; }
        .status-completed { background: #cce5ff; color: #004085; }
        
        /* Install Banner */
        .install-banner {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        
        .install-banner.hidden {
            display: none;
        }
        
        .install-text {
            flex: 1;
        }
        
        .install-text h4 {
            margin-bottom: 5px;
        }
        
        .install-text p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .container { 
                padding: 10px; 
            }
            
            .header h1 { 
                font-size: 2rem; 
            }
            
            .card { 
                padding: 20px; 
                border-radius: 10px;
            }
            
            .tracking-grid { 
                grid-template-columns: 1fr; 
            }
            
            .video-grid {
                grid-template-columns: 1fr;
            }
            
            .demo-buttons {
                padding: 15px;
            }
            
            .btn {
                padding: 14px 20px;
                font-size: 16px;
                border-radius: 10px;
            }
            
            .tabs {
                border-bottom: none;
                background: #f8f9fa;
                border-radius: 10px;
                padding: 5px;
            }
            
            .tab {
                border-radius: 8px;
                margin: 2px;
                border-bottom: none;
                background: transparent;
            }
            
            .tab.active {
                background: white;
                color: #667eea;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }
            
            /* Better mobile form layouts */
            .tracking-card {
                padding: 15px;
            }
            
            input, textarea, select {
                font-size: 16px; /* Prevents zoom on iOS */
                border-radius: 10px;
            }
        }
        
        /* PWA Safe Areas for iPhone X+ */
        @supports (padding: max(0px)) {
            .container {
                padding-left: max(20px, env(safe-area-inset-left));
                padding-right: max(20px, env(safe-area-inset-right));
                padding-top: max(20px, env(safe-area-inset-top));
                padding-bottom: max(20px, env(safe-area-inset-bottom));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>FitCoach Pro</h1>
            <p>Your 12-Week Transformation Journey</p>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="card">
            <!-- PWA Install Banner -->
            <div id="install-banner" class="install-banner hidden">
                <div class="install-text">
                    <h4>📱 Install FitCoach Pro</h4>
                    <p>Add to your home screen for the best experience!</p>
                </div>
                <button class="btn" onclick="installApp()" style="background: white; color: #28a745; margin: 0;">Install</button>
            </div>
            
            <h2 style="text-align: center; margin-bottom: 30px;">🚀 Demo Your Coaching Platform</h2>
            
            <div class="demo-buttons">
                <h3>👥 Try as Client:</h3>
                <button class="btn btn-success" onclick="loginAsClient('Sarah', 1)">Sarah - Day 1 (New Start)</button>
                <button class="btn btn-success" onclick="loginAsClient('Mike', 15)">Mike - Day 15 (Check-in Available + Sample Data)</button>
                <button class="btn btn-success" onclick="loginAsClient('Emma', 30)">Emma - Day 30 (Second Check-in)</button>
                <button class="btn btn-success" onclick="loginAsClient('Alex', 84)">Alex - Day 84 (Program Complete)</button>
                
                <h3 style="margin-top: 20px;">👨‍💼 Try as Coach:</h3>
                <button class="btn" onclick="loginAsCoach()">Coach Dashboard</button>
            </div>
            
            <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin-top: 20px;">
                <h4>📱 PWA Features Added:</h4>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>✅ <strong>Installable</strong> - Add to home screen like native app</li>
                    <li>✅ <strong>Offline Ready</strong> - Works without internet connection</li>
                    <li>✅ <strong>Mobile Optimized</strong> - Perfect touch experience</li>
                    <li>✅ <strong>Fast Loading</strong> - Cached for instant startup</li>
                    <li>✅ <strong>App-like Feel</strong> - Full screen, no browser UI</li>
                </ul>
            </div>
        </div>

        <!-- Client Dashboard -->
        <div id="client-screen" class="card hidden">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 id="client-name">Welcome!</h2>
                <button class="btn btn-secondary" onclick="logout()">Logout</button>
            </div>

            <!-- Progress Section -->
            <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3>Your 12-Week Transformation Journey</h3>
                <p id="progress-text">Loading...</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-top: 15px;">
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 8px;">
                        <div style="font-weight: bold; color: #667eea;">Week</div>
                        <div id="current-week">1</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 8px;">
                        <div style="font-weight: bold; color: #667eea;">Phase</div>
                        <div id="current-phase">Foundation</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 8px;">
                        <div style="font-weight: bold; color: #667eea;">Next Check-in</div>
                        <div id="next-checkin">Day 14</div>
                    </div>
                </div>
                <p id="contact-status" style="margin-top: 15px; font-weight: bold;">Check-ins available every 2 weeks!</p>
            </div>

            <div class="tabs">
                <div class="tab active" onclick="showTab(event, 'videos')">Training Videos</div>
                <div class="tab" onclick="showTab(event, 'meals')">Meal Plans</div>
                <div class="tab" onclick="showTab(event, 'tracking')">Daily Tracking</div>
                <div class="tab" onclick="showTab(event, 'checkin')" id="checkin-tab">2-Week Check-in</div>
            </div>

            <!-- Videos Tab -->
            <div id="videos-tab" class="tab-content">
                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4>📅 Your Current Program Phase</h4>
                    <p id="phase-description">Foundation Phase: Focus on form, basic movements, and building habits.</p>
                </div>
                
                <div class="video-grid">
                    <div class="video-card">
                        <div class="video-icon">🏋️</div>
                        <h4>Foundation Training</h4>
                        <p>Basic movements (Weeks 1-4)</p>
                        <button class="btn" onclick="generateWeeklySummary()" style="background: white; color: #667eea; margin-top: 15px;">
                        View Summary
                    </button>
                </div>
            </div>

            <!-- Check-in Tab -->
            <div id="checkin-tab-content" class="tab-content hidden">
                <div id="checkin-locked">
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 64px; margin-bottom: 20px;">⏱️</div>
                        <h3>2-Week Check-in - Not Yet Available</h3>
                        <p>Check-ins unlock every 14 days. This ensures you have time to establish routines and see progress.</p>
                    </div>
                </div>
                
                <div id="checkin-unlocked" class="hidden">
                    <h3>📊 2-Week Progress Check-in</h3>
                    
                    <!-- Progress Photos -->
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h4>📸 Progress Photos</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-top: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px;">Front View</label>
                                <input type="file" accept="image/*">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px;">Side View</label>
                                <input type="file" accept="image/*">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px;">Back View</label>
                                <input type="file" accept="image/*">
                            </div>
                        </div>
                    </div>

                    <!-- Measurements -->
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h4>📏 Body Measurements</h4>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
                            <div>
                                <label>Weight (lbs)</label>
                                <input type="number" id="weight" placeholder="150">
                            </div>
                            <div>
                                <label>Chest (inches)</label>
                                <input type="number" id="chest" placeholder="36" step="0.5">
                            </div>
                            <div>
                                <label>Waist (inches)</label>
                                <input type="number" id="waist" placeholder="32" step="0.5">
                            </div>
                            <div>
                                <label>Hips (inches)</label>
                                <input type="number" id="hips" placeholder="38" step="0.5">
                            </div>
                            <div>
                                <label>Arms (inches)</label>
                                <input type="number" id="arms" placeholder="12" step="0.5">
                            </div>
                            <div>
                                <label>Thighs (inches)</label>
                                <input type="number" id="thighs" placeholder="22" step="0.5">
                            </div>
                        </div>
                    </div>

                    <!-- Weekly Tracking Summary -->
                    <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h4>📊 Auto-calculated Averages</h4>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
                            <div>
                                <label>Week 1 Weight Average</label>
                                <input type="text" id="week1-weight-avg" readonly style="background: white;">
                            </div>
                            <div>
                                <label>Week 1 Steps Average</label>
                                <input type="text" id="week1-steps-avg" readonly style="background: white;">
                            </div>
                            <div>
                                <label>Week 2 Weight Average</label>
                                <input type="text" id="week2-weight-avg" readonly style="background: white;">
                            </div>
                            <div>
                                <label>Week 2 Steps Average</label>
                                <input type="text" id="week2-steps-avg" readonly style="background: white;">
                            </div>
                        </div>
                    </div>

                    <!-- Progress Notes -->
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h4>📝 Progress Update</h4>
                        <textarea id="progress-notes" rows="4" placeholder="Share your progress, challenges, victories, and questions..."></textarea>
                    </div>

                    <button class="btn" onclick="submitCheckin()" style="background: #28a745; font-size: 18px; padding: 15px 30px;">
                        Submit 2-Week Check-in
                    </button>
                </div>
            </div>
        </div>

        <!-- Coach Dashboard -->
        <div id="coach-screen" class="card hidden">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>Coach Dashboard</h2>
                <button class="btn btn-secondary" onclick="logout()">Logout</button>
            </div>

            <div class="tabs">
                <div class="tab active" onclick="showCoachTab(event, 'clients')">Clients</div>
                <div class="tab" onclick="showCoachTab(event, 'messages')">Messages</div>
            </div>

            <div id="coach-clients-tab">
                <h3>Your Clients</h3>
                <div class="client-card">
                    <div>
                        <h4>Sarah Johnson</h4>
                        <p>Weight Loss | Day 1 of 84 | Foundation Phase</p>
                    </div>
                    <span class="status-badge status-active">Starting</span>
                </div>
                <div class="client-card">
                    <div>
                        <h4>Mike Chen</h4>
                        <p>Muscle Gain | Day 15 of 84 | Foundation Phase</p>
                    </div>
                    <span class="status-badge status-active">Check-in Due</span>
                </div>
                <div class="client-card">
                    <div>
                        <h4>Emma Davis</h4>
                        <p>General Fitness | Day 30 of 84 | Building Phase</p>
                    </div>
                    <span class="status-badge status-active">Active</span>
                </div>
                <div class="client-card">
                    <div>
                        <h4>Alex Rivera</h4>
                        <p>Athletic Performance | Day 84 of 84 | Complete</p>
                    </div>
                    <span class="status-badge status-completed">Completed</span>
                </div>
            </div>

            <div id="coach-messages-tab" class="hidden">
                <h3>Client Check-ins</h3>
                <div class="client-card">
                    <div>
                        <h4>Mike Chen - 2-Week Check-in</h4>
                        <p><strong>Weight:</strong> 181.2lbs avg (-1.3lbs) | <strong>Steps:</strong> 8,943/day</p>
                        <p>"Feeling great! Getting stronger. Question about increasing weights."</p>
                        <small>📸 Photos attached | 📏 Measurements | 📈 Chart included</small>
                    </div>
                    <button class="btn btn-success">Review</button>
                </div>
                <div class="client-card">
                    <div>
                        <h4>Emma Davis - 4-Week Check-in</h4>
                        <p><strong>Weight:</strong> 145lbs avg (-8lbs) | <strong>Steps:</strong> 11,200/day</p>
                        <p>"Amazing progress! Ready for building phase."</p>
                        <small>📸 Photos attached | 📏 Measurements | 📈 Chart included</small>
                    </div>
                    <button class="btn btn-success">Review</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let currentDay = 1;
        let trackingData = JSON.parse(localStorage.getItem('trackingData') || '{}');
        let deferredPrompt = null;

        // PWA Installation
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-banner').classList.remove('hidden');
        });

        async function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    document.getElementById('install-banner').classList.add('hidden');
                    showNotification('🎉 App installed successfully!');
                }
                deferredPrompt = null;
            } else {
                showInstallInstructions();
            }
        }

        function showInstallInstructions() {
            let instructions = '';
            if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
                instructions = `📱 To install on iOS:
                
1. Tap the Share button (⬆️) in Safari
2. Scroll down and tap "Add to Home Screen"
3. Tap "Add" to install FitCoach Pro`;
            } else if (/Android/.test(navigator.userAgent)) {
                instructions = `📱 To install on Android:
                
1. Tap the menu (⋮) in your browser
2. Select "Add to Home Screen" or "Install App"
3. Tap "Add" to install FitCoach Pro`;
            } else {
                instructions = `💻 To install on Desktop:
                
1. Look for the install icon (⊕) in your address bar
2. Click it and select "Install"
3. Or use browser menu > "Install FitCoach Pro"`;
            }
            
            alert(instructions);
        }

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'fitcoach-pro-v1';
                    const urlsToCache = [
                        './',
                        './manifest.json'
                    ];

                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });

                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => {
                                    return response || fetch(event.request);
                                })
                        );
                    });
                `;

                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);

                navigator.serviceWorker.register(swUrl)
                    .then(() => console.log('ServiceWorker registered'))
                    .catch(() => console.log('ServiceWorker registration failed'));
            });
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #28a745;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
                z-index: 1000;
                font-weight: 600;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function loginAsClient(name, day) {
            currentUser = { name: name, type: 'client', day: day };
            currentDay = day;
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('client-screen').classList.remove('hidden');
            document.getElementById('client-name').textContent = `Welcome, ${name}!`;
            updateProgress();
            initializeDemoData();
            showTab(null, 'videos');
        }

        function loginAsCoach() {
            currentUser = { name: 'Coach', type: 'coach' };
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('coach-screen').classList.remove('hidden');
            showCoachTab(null, 'clients');
        }

        function logout() {
            currentUser = null;
            document.getElementById('login-screen').classList.remove('hidden');
            document.getElementById('client-screen').classList.add('hidden');
            document.getElementById('coach-screen').classList.add('hidden');
        }

        function updateProgress() {
            const progress = Math.min((currentDay / 84) * 100, 100);
            const currentWeek = Math.ceil(currentDay / 7);
            const nextCheckinDay = Math.ceil(currentDay / 14) * 14;
            
            let phase = "Foundation";
            let phaseDescription = "Foundation Phase: Focus on form, basic movements, and building habits.";
            
            if (currentDay > 28) {
                phase = "Building";
                phaseDescription = "Building Phase: Increase intensity, progressive overload, and muscle development.";
            }
            if (currentDay > 56) {
                phase = "Transformation";
                phaseDescription = "Transformation Phase: Peak intensity, advanced techniques, and final results.";
            }
            
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = 
                currentDay >= 84 ? '🎉 12-Week Transformation Complete!' : `Day ${currentDay} of 84 - ${phase} Phase`;
            
            document.getElementById('current-week').textContent = currentWeek;
            document.getElementById('current-phase').textContent = phase;
            document.getElementById('next-checkin').textContent = currentDay >= 84 ? "Complete!" : `Day ${nextCheckinDay}`;
            
            const phaseElement = document.getElementById('phase-description');
            if (phaseElement) {
                phaseElement.textContent = phaseDescription;
            }
            
            const canCheckin = currentDay >= 14;
            const checkinTab = document.getElementById('checkin-tab');
            
            if (canCheckin || currentDay >= 84) {
                checkinTab.style.color = '#667eea';
                document.getElementById('contact-status').textContent = 
                    currentDay >= 84 ? 'Program complete! Submit final results.' : 'Check-in available! Submit your 2-week progress.';
                document.getElementById('checkin-locked').classList.add('hidden');
                document.getElementById('checkin-unlocked').classList.remove('hidden');
                updateCheckinWithAverages();
            } else {
                checkinTab.style.color = '#ccc';
                const daysUntilCheckin = 14 - (currentDay % 14);
                document.getElementById('contact-status').textContent = `Next check-in in ${daysUntilCheckin} days.`;
            }
        }

        function showTab(event, tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            if (event) event.target.classList.add('active');
            
            document.getElementById('videos-tab').classList.toggle('hidden', tab !== 'videos');
            document.getElementById('meals-tab').classList.toggle('hidden', tab !== 'meals');
            document.getElementById('tracking-tab').classList.toggle('hidden', tab !== 'tracking');
            document.getElementById('checkin-tab-content').classList.toggle('hidden', tab !== 'checkin');
            
            if (tab === 'tracking') {
                loadTrackingData();
                setTimeout(drawWeightChart, 100);
            }
        }

        function showCoachTab(event, tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            if (event) event.target.classList.add('active');
            
            document.getElementById('coach-clients-tab').classList.toggle('hidden', tab !== 'clients');
            document.getElementById('coach-messages-tab').classList.toggle('hidden', tab !== 'messages');
        }

        function addDailyEntry() {
            const weight = document.getElementById('daily-weight').value;
            const steps = document.getElementById('daily-steps').value;
            
            if (!weight || !steps) {
                showNotification('Please enter both weight and steps!');
                return;
            }
            
            const today = new Date().toLocaleDateString();
            const clientKey = currentUser.name.replace(' ', '_');
            
            if (!trackingData[clientKey]) {
                trackingData[clientKey] = { weights: {}, steps: {} };
            }
            
            trackingData[clientKey].weights[today] = parseFloat(weight);
            trackingData[clientKey].steps[today] = parseInt(steps);
            
            localStorage.setItem('trackingData', JSON.stringify(trackingData));
            
            document.getElementById('daily-weight').value = '';
            document.getElementById('daily-steps').value = '';
            
            loadTrackingData();
            drawWeightChart();
            
            showNotification('✅ Daily entry saved successfully!');
        }

        function loadTrackingData() {
            if (!currentUser) return;
            
            const clientKey = currentUser.name.replace(' ', '_');
            const clientData = trackingData[clientKey] || { weights: {}, steps: {} };
            
            const last7Days = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                last7Days.push(date.toLocaleDateString());
            }
            
            updateWeightTable(clientData.weights, last7Days);
            updateStepsTable(clientData.steps, last7Days);
            
            const weightAvg = calculateAverage(clientData.weights, last7Days);
            const stepsAvg = calculateAverage(clientData.steps, last7Days);
            
            document.getElementById('weight-average').textContent = weightAvg ? weightAvg.toFixed(1) : '---';
            document.getElementById('steps-average').textContent = stepsAvg ? Math.round(stepsAvg).toLocaleString() : '---';
        }

        function updateWeightTable(weights, days) {
            const tbody = document.getElementById('weight-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            
            days.forEach(day => {
                const date = new Date(day);
                const dayName = dayNames[date.getDay()];
                const weight = weights[day] || '---';
                
                const row = document.createElement('tr');
                row.innerHTML = `<td>${dayName}</td><td style="text-align: center;">${weight}</td>`;
                tbody.appendChild(row);
            });
            
            const avg = calculateAverage(weights, days);
            const avgElement = document.getElementById('weight-table-avg');
            if (avgElement) {
                avgElement.textContent = avg ? avg.toFixed(1) + ' lbs' : '---';
            }
        }

        function updateStepsTable(steps, days) {
            const tbody = document.getElementById('steps-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            
            days.forEach(day => {
                const date = new Date(day);
                const dayName = dayNames[date.getDay()];
                const stepCount = steps[day] || '---';
                const displaySteps = stepCount !== '---' ? stepCount.toLocaleString() : '---';
                
                const row = document.createElement('tr');
                row.innerHTML = `<td>${dayName}</td><td style="text-align: center;">${displaySteps}</td>`;
                tbody.appendChild(row);
            });
            
            const avg = calculateAverage(steps, days);
            const avgElement = document.getElementById('steps-table-avg');
            if (avgElement) {
                avgElement.textContent = avg ? Math.round(avg).toLocaleString() + ' steps' : '---';
            }
        }

        function calculateAverage(data, days) {
            const values = days.map(day => data[day]).filter(val => val !== undefined && val !== null);
            if (values.length === 0) return null;
            return values.reduce((sum, val) => sum + val, 0) / values.length;
        }

        function drawWeightChart() {
            const canvas = document.getElementById('weightChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            let weeklyAverages, weeks;
            
            if (currentUser && currentUser.name === 'Mike') {
                weeklyAverages = [182.3, 181.2, 180.5, 179.8];
                weeks = ['Week 1', 'Week 2', 'Week 3', 'Week 4'];
            } else {
                weeklyAverages = [152.3, 151.1, 149.8, 148.5];
                weeks = ['Week 1', 'Week 2', 'Week 3', 'Week 4'];
            }
            
            if (weeklyAverages.length === 0) {
                ctx.fillStyle = '#666';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Add daily entries to see progress', canvas.width / 2, canvas.height / 2);
                return;
            }
            
            const padding = 40;
            const chartWidth = canvas.width - 2 * padding;
            const chartHeight = canvas.height - 2 * padding;
            
            const minWeight = Math.min(...weeklyAverages) - 2;
            const maxWeight = Math.max(...weeklyAverages) + 2;
            const weightRange = maxWeight - minWeight;
            
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, padding + chartHeight);
            ctx.lineTo(padding + chartWidth, padding + chartHeight);
            ctx.stroke();
            
            ctx.strokeStyle = '#4caf50';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            weeklyAverages.forEach((weight, index) => {
                const x = padding + (index / (weeklyAverages.length - 1)) * chartWidth;
                const y = padding + chartHeight - ((weight - minWeight) / weightRange) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                
                ctx.fillStyle = '#4caf50';
                ctx.fillRect(x - 4, y - 4, 8, 8);
                
                ctx.fillStyle = '#333';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(weeks[index], x, padding + chartHeight + 20);
                ctx.fillText(weight.toFixed(1) + ' lbs', x, y - 10);
            });
            
            ctx.stroke();
        }

        function generateWeeklySummary() {
            const clientKey = currentUser.name.replace(' ', '_');
            const clientData = trackingData[clientKey] || { weights: {}, steps: {} };
            
            const last7Days = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                last7Days.push(date.toLocaleDateString());
            }
            
            const weightAvg = calculateAverage(clientData.weights, last7Days);
            const stepsAvg = calculateAverage(clientData.steps, last7Days);
            
            const summary = `📊 WEEKLY PROGRESS SUMMARY

⚖️ Weight Average: ${weightAvg ? weightAvg.toFixed(1) + ' lbs' : 'Not recorded'}
👣 Steps Average: ${stepsAvg ? Math.round(stepsAvg).toLocaleString() + ' steps/day' : 'Not recorded'}

📈 This data will be automatically included in your 2-week check-in!`;
            
            alert(summary);
        }

        function updateCheckinWithAverages() {
            if (!currentUser) return;
            
            let week1WeightAvg, week1StepsAvg, week2WeightAvg, week2StepsAvg;
            
            if (currentUser.name === 'Mike') {
                week1WeightAvg = 182.3;
                week1StepsAvg = 8750;
                week2WeightAvg = 181.2;
                week2StepsAvg = 8943;
            } else {
                week1WeightAvg = 152.3;
                week1StepsAvg = 8500;
                week2WeightAvg = 151.1;
                week2StepsAvg = 9200;
            }
            
            const week1WeightEl = document.getElementById('week1-weight-avg');
            const week1StepsEl = document.getElementById('week1-steps-avg');
            const week2WeightEl = document.getElementById('week2-weight-avg');
            const week2StepsEl = document.getElementById('week2-steps-avg');
            
            if (week1WeightEl) week1WeightEl.value = week1WeightAvg.toFixed(1) + ' lbs';
            if (week1StepsEl) week1StepsEl.value = Math.round(week1StepsAvg).toLocaleString() + ' steps';
            if (week2WeightEl) week2WeightEl.value = week2WeightAvg.toFixed(1) + ' lbs';
            if (week2StepsEl) week2StepsEl.value = Math.round(week2StepsAvg).toLocaleString() + ' steps';
        }

        function playVideo(videoName) {
            showNotification(`🎬 Playing: ${videoName}`);
            setTimeout(() => {
                alert(`🎬 Playing: ${videoName}

In your real app, this would open:
• HD video player with progress tracking
• Exercise form tips and modifications
• Ability to mark as completed
• Next video recommendations

Ready to upload your training content!`);
            }, 500);
        }

        function downloadMealPlan() {
            showNotification('📋 Downloading meal plan...');
            setTimeout(() => {
                alert(`📋 Meal Plan Downloaded!

In your real app, this would download:
• Complete meal plan PDF for current phase
• Shopping lists with quantities
• Meal prep instructions
• Macro and calorie breakdowns

Ready to upload your custom meal plans!`);
            }, 500);
        }

        function submitCheckin() {
            const notes = document.getElementById('progress-notes').value;
            
            if (!notes.trim()) {
                showNotification('Please fill in your progress notes to complete check-in.');
                return;
            }
            
            showNotification('✅ Check-in submitted successfully!');
            
            setTimeout(() => {
                const week1WeightAvg = document.getElementById('week1-weight-avg').value;
                const week1StepsAvg = document.getElementById('week1-steps-avg').value;
                const week2WeightAvg = document.getElementById('week2-weight-avg').value;
                const week2StepsAvg = document.getElementById('week2-steps-avg').value;
                
                alert(`✅ 2-Week Check-in Submitted Successfully!

📊 COMPLETE TRACKING SUMMARY:
• Week 1 Weight Average: ${week1WeightAvg}
• Week 1 Steps Average: ${week1StepsAvg}
• Week 2 Weight Average: ${week2WeightAvg}
• Week 2 Steps Average: ${week2StepsAvg}

📝 Progress Notes: ${notes.substring(0, 100)}${notes.length > 100 ? '...' : ''}

📈 INCLUDED AUTOMATICALLY:
• Weight progress chart
• Daily tracking data
• Progress photos (uploaded)
• Body measurements

🎯 NEXT STEPS:
Your coach will review everything and respond within 24 hours with personalized feedback and program adjustments!

Thank you for staying committed to your transformation! 💪`);
                
                document.getElementById('progress-notes').value = '';
            }, 1000);
        }

        function initializeDemoData() {
            if (!trackingData['Mike_Chen']) {
                trackingData['Mike_Chen'] = { weights: {}, steps: {} };
                
                const dates = [];
                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    dates.push(date.toLocaleDateString());
                }
                
                const sampleWeights = [182.5, 182.1, 181.8, 181.5, 181.2, 180.9, 180.6];
                const sampleSteps = [8500, 9200, 7800, 10200, 8900, 9500, 8700];
                
                dates.forEach((date, index) => {
                    trackingData['Mike_Chen'].weights[date] = sampleWeights[index];
                    trackingData['Mike_Chen'].steps[date] = sampleSteps[index];
                });
                
                localStorage.setItem('trackingData', JSON.stringify(trackingData));
            }
            
            if (currentUser) {
                loadTrackingData();
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            initializeDemoData();
            
            setTimeout(() => {
                if (!window.matchMedia('(display-mode: standalone)').matches) {
                    document.getElementById('install-banner').classList.remove('hidden');
                }
            }, 2000);
        });

        window.addEventListener('appinstalled', () => {
            document.getElementById('install-banner').classList.add('hidden');
            showNotification('🎉 FitCoach Pro installed successfully!');
        });
    </script>
</body>
</html>" onclick="playVideo('Foundation Training')">Watch</button>
                    </div>
                    <div class="video-card">
                        <div class="video-icon">💪</div>
                        <h4>Strength Building</h4>
                        <p>Progressive resistance (Weeks 5-8)</p>
                        <button class="btn" onclick="playVideo('Strength Building')">Watch</button>
                    </div>
                    <div class="video-card">
                        <div class="video-icon">🏃</div>
                        <h4>Power Training</h4>
                        <p>Advanced training (Weeks 9-12)</p>
                        <button class="btn" onclick="playVideo('Power Training')">Watch</button>
                    </div>
                    <div class="video-card">
                        <div class="video-icon">🧘</div>
                        <h4>Recovery</h4>
                        <p>Available all weeks</p>
                        <button class="btn" onclick="playVideo('Recovery')">Watch</button>
                    </div>
                </div>
            </div>

            <!-- Meals Tab -->
            <div id="meals-tab" class="tab-content hidden">
                <div style="background: #f1f8e9; padding: 20px; border-radius: 8px;">
                    <h3>Your 12-Week Progressive Meal Plan</h3>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h4>🥗 Phase 1: Foundation (Weeks 1-4)</h4>
                        <p><strong>Breakfast:</strong> Oatmeal with berries and protein powder</p>
                        <p><strong>Lunch:</strong> Grilled chicken salad with mixed vegetables</p>
                        <p><strong>Dinner:</strong> Salmon with quinoa and steamed broccoli</p>
                    </div>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h4>💪 Phase 2: Building (Weeks 5-8)</h4>
                        <p><strong>Breakfast:</strong> Egg whites with spinach and toast</p>
                        <p><strong>Lunch:</strong> Turkey wrap with vegetables</p>
                        <p><strong>Dinner:</strong> Lean beef with sweet potato</p>
                    </div>
                    
                    <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <h4>🔥 Phase 3: Transformation (Weeks 9-12)</h4>
                        <p><strong>Breakfast:</strong> Greek yogurt parfait with nuts</p>
                        <p><strong>Lunch:</strong> Quinoa bowl with grilled protein</p>
                        <p><strong>Dinner:</strong> Grilled fish with roasted vegetables</p>
                    </div>
                </div>
                <button class="btn" onclick="downloadMealPlan()">Download Current Phase Plan</button>
            </div>

            <!-- Daily Tracking Tab -->
            <div id="tracking-tab" class="tab-content hidden">
                <h3>📊 Daily Weight & Steps Tracking</h3>
                
                <!-- Summary Cards -->
                <div class="tracking-grid">
                    <div class="tracking-card" style="background: linear-gradient(135deg, #4caf50, #8bc34a);">
                        <h4>📈 Weekly Weight Average</h4>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;" id="weight-average">---</div>
                        <small>lbs (This Week)</small>
                    </div>
                    <div class="tracking-card" style="background: linear-gradient(135deg, #2196f3, #03a9f4);">
                        <h4>👣 Weekly Steps Average</h4>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;" id="steps-average">---</div>
                        <small>steps/day (This Week)</small>
                    </div>
                </div>

                <!-- Quick Entry Form -->
                <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; margin-bottom: 30px;">
                    <h4>📝 Today's Entry</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: bold;">Weight (lbs)</label>
                            <input type="number" id="daily-weight" placeholder="150.5" step="0.1">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: bold;">Steps</label>
                            <input type="number" id="daily-steps" placeholder="8000">
                        </div>
                        <div style="display: flex; align-items: end;">
                            <button class="btn" onclick="addDailyEntry()" style="width: 100%;">Add Entry</button>
                        </div>
                    </div>
                </div>

                <!-- Weight Chart -->
                <div style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <h4>📈 Weight Progress Chart</h4>
                    <canvas id="weightChart" width="400" height="200" style="max-width: 100%; margin-top: 20px;"></canvas>
                </div>

                <!-- Data Tables -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h4>⚖️ This Week's Weight</h4>
                        <table>
                            <thead>
                                <tr><th>Day</th><th style="text-align: center;">Weight</th></tr>
                            </thead>
                            <tbody id="weight-tbody"></tbody>
                            <tfoot>
                                <tr style="background: #e8f5e8; font-weight: bold;">
                                    <td>Average</td><td style="text-align: center;" id="weight-table-avg">---</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h4>👣 This Week's Steps</h4>
                        <table>
                            <thead>
                                <tr><th>Day</th><th style="text-align: center;">Steps</th></tr>
                            </thead>
                            <tbody id="steps-tbody"></tbody>
                            <tfoot>
                                <tr style="background: #e3f2fd; font-weight: bold;">
                                    <td>Average</td><td style="text-align: center;" id="steps-table-avg">---</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <!-- Share Summary -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 12px; margin-top: 30px; text-align: center;">
                    <h4>📤 Weekly Progress Summary</h4>
                    <p>Your data will be automatically included in your 2-week check-ins!</p>
                    <button class="btn" onclick="generateWeeklySummary()" style
